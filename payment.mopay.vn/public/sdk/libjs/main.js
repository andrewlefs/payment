var ME_SDK,jsME=$.noConflict();!function(){"use strict";function t(e){return this instanceof t?(this.init.call(this,e),""!=!!this.opts.accessToken&&""!=!!this.opts.ip&&""!=!!this.opts.lang&&""!=!!this.opts.info&&this.open_payment.call(this),this):new t(e)}var e=new Date,n=e.getTime(),s={T:n,URL_LIBJS:"https://payment.mopay.vn/sdk/libjs/",URL_LIB:"https://payment.mopay.vn/sdk/static/",URL_TEMPLATE:"https://payment.mopay.vn/sdk/templatejs/",URL_CALLBACK:"hhttps://payment.mopay.vn/sdk/",dev:"0"},o=function(t,e,n){if("css"===e&&d)return void r(t,n);var s,o,a,i,c,p;switch(e){case"css":s="link",o="text/css",a="href";break;case"js":s="script",o="text/javascript",a="src"}i=document.getElementsByTagName(s),c=i[i.length-1],p=document.createElement(s),p.type=o,"css"==e&&(p.rel="stylesheet"),p.readyState?p.onreadystatechange=function(){("loaded"==p.readyState||"complete"==p.readyState)&&(p.onreadystatechange=null,n&&"function"==typeof n&&n())}:p.onload=function(){n&&"function"==typeof n&&n()},p[a]=t,"js"==e&&(jsME('script[src$="'+t+'"]').remove(),i=document.getElementsByTagName(s),c=i[i.length-1]),jsME(0=="link".length)&&"css"==e?jsME("head").eq(0).append('<link rel="stylesheet" type="text/css" media="all" href="'+t+'">'):c.parentNode?c.parentNode.insertBefore(p,c.nextSibling):jsME("head").append(p)},a=function(t,e,n){o(t,"js",e)},i=function(t,e){o(t,"css",e)},c=function(){return window.navigator.userAgent},r=function(t,e){var n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=t,document.getElementsByTagName("head")[0].appendChild(n);var s=document.createElement("img");s.onerror=function(){e&&"function"==typeof e&&e()},s.src=t},p=function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");return-1!==e?!0:!1},d=/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor);t.prototype={init:function(t){this.opts=jsME.extend({},s,t),this.opts.cache=!0,this.opts.loadScript=a,this.opts.loadCss=i,this.opts.user_agent=c()},open_payment:function(t){this.init(t);var e=this;a(this.opts.URL_LIBJS+"sdk.js?t="+this.opts.T,function(){ME_SDK=new ME(e.opts),(""===e.opts.accessToken||""===e.opts.secret)&&ME_SDK.$container.html("Valid access token")})}},a(s.URL_LIBJS+"lib.js",function(){a(s.URL_LIB+"js/custom.js",function(){jsME.browser={msie:p()}})}),window.MEE=t}(),0==jsME("#mopay_sdk").length&&jsME("body").eq(0).append('<div id="mopay_sdk" ></div>');var Mopay=new MEE;