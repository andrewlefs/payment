<?php

class MEAPI_Config_PaymentTemplate {

    public static function exchange_group() {
        return array(
            'card' => array('card', 'card-gate'),
            'banking' => array('banking-atm', 'banking-credit'),
        );
    }

    public static function exchange_rate() {
        $result = array(
            'sms' => array(
                'title' => 'Nạp SMS',
                'identify' => 'sms',
                'items' => array(
                    '7665' => array(
                        'message' => '10,000 VNĐ',
                        'description' => '40 mCoin',
                    ),
                    '7765' => array(
                        'message' => '15,000 VNĐ',
                        'description' => '60 mCoin',
                    ))
            ),
            'sms' => array(// 9029
                'title' => 'Nạp SMS',
                'identify' => 'sms',
                'items' => array(
                    array(
                        'identify' => 'NAP10',
                        'message' => '10,000 VNĐ',
                        'description' => '50 mCoin'
                    ),
                    array(
                        'identify' => 'NAP15',
                        'message' => '15,000 VNĐ',
                        'description' => '75 mCoin'
                    ),
                    array(
                        'identify' => 'NAP20',
                        'message' => '20,000 VNĐ',
                        'description' => '100 mCoin'
                    ),
                    array(
                        'identify' => 'NAP30',
                        'message' => '30,000 VNĐ',
                        'description' => '150 mCoin'
                    ),
                    array(
                        'identify' => 'NAP40',
                        'message' => '40,000 VNĐ',
                        'description' => '200 mCoin'
                    ),
                    array(
                        'identify' => 'NAP50',
                        'message' => '50,000 VNĐ',
                        'description' => '250 mCoin'
                    ),
                    array(
                        'identify' => 'NAP100',
                        'message' => '100,000 VNĐ',
                        'description' => '500 mCoin'
                    )
                )
            ),
            'card' => array(
                'title' => 'Nạp thẻ điện thoại',
                'identify' => 'card',
                'items' => array(
                    array(
                        'identify' => '10000',
                        'message' => '10,000 VNĐ',
                        'description' => '85 mCoin'
                    ),
                    array(
                        'identify' => '20000',
                        'message' => '20,000 VNĐ',
                        'description' => '170 mCoin'
                    ),
                    array(
                        'identify' => '10000',
                        'message' => '50,000 VNĐ',
                        'description' => '425 mCoin'
                    ),
                    array(
                        'identify' => '100000',
                        'message' => '100,000 VNĐ',
                        'description' => '850 mCoin'
                    ),
                    array(
                        'identify' => '200000',
                        'message' => '200,000 VNĐ',
                        'description' => '1700 mCoin'
                    ),
                    array(
                        'identify' => '500000',
                        'message' => '500,000 VNĐ',
                        'description' => '4250 mCoin'
                    )
                )
            ),
            'card-gate' => array(
                'title' => 'Nạp thẻ Gate',
                'identify' => 'card-gate',
                'items' => array(
                    array(
                        'identify' => '10000',
                        'message' => '10,000 VNĐ',
                        'description' => '90 mCoin'
                    ),
                    array(
                        'identify' => '20000',
                        'message' => '20,000 VNĐ',
                        'description' => '180 mCoin'
                    ),
                    array(
                        'identify' => '50000',
                        'message' => '50,000 VNĐ',
                        'description' => '450 mCoin'
                    ),
                    array(
                        'identify' => '100000',
                        'message' => '100,000 VNĐ',
                        'description' => '900 mCoin'
                    ),
                    array(
                        'identify' => '500000',
                        'message' => '500,000 VNĐ',
                        'description' => '4500 mCoin'
                    ),
                    array(
                        'identify' => '1000000',
                        'message' => '1,000,000 VNĐ',
                        'description' => '9000 mCoin'
                    ),
                    array(
                        'identify' => '5000000',
                        'message' => '5,000,000 VNĐ',
                        'description' => '45000 mCoin'
                    )
                )
            ),
            'banking-atm' => array(
                'title' => 'Nạp ngân hàng ( Thẻ ATM )',
                'identify' => 'banking-atm',
                'items' => array(
                    /*
                      array(
                      'identify' => '10000',
                      'message' => '10,000 VNĐ',
                      'description' => '100 mCoin'
                      ),
                     */
                    array(
                        'identify' => '100000',
                        'message' => '100,000 VNĐ',
                        'description' => '1,000 mCoin'
                    ),
                    array(
                        'identify' => '200000',
                        'message' => '200,000 VNĐ',
                        'description' => '2,000 mCoin'
                    ),
                    /*
                      array(
                      'identify' => '300000',
                      'message' => '300,000 VNĐ',
                      'description' => '3,000 mCoin'
                      ),
                      array(
                      'identify' => '400000',
                      'message' => '400,000 VNĐ',
                      'description' => '4,000 mCoin'
                      ),
                     */
                    array(
                        'identify' => '500000',
                        'message' => '500,000 VNĐ',
                        'description' => '5,000 mCoin'
                    ),
                    array(
                        'identify' => '1000000',
                        'message' => '1,000,000 VNĐ',
                        'description' => '10,000 mCoin'
                    ),
                    /*
                      array(
                      'identify' => '2000000',
                      'message' => '2,000,000 VNĐ',
                      'description' => '20,000 mCoin'
                      ),
                      array(
                      'identify' => '3000000',
                      'message' => '3,000,000 VNĐ',
                      'description' => '30,000 mCoin'
                      ),
                     */
                    array(
                        'identify' => '5000000',
                        'message' => '5,000,000 VNĐ',
                        'description' => '50,000 mCoin'
                    ),
                /*
                  array(
                  'identify' => '10000000',
                  'message' => '10,000,000 VNĐ',
                  'description' => '100,000 mCoin'
                  ),
                  array(
                  'identify' => '20000000',
                  'message' => '20,000,000 VNĐ',
                  'description' => '200,000 mCoin'
                  ),
                  array(
                  'identify' => '50000000',
                  'message' => '50,000,000 VNĐ',
                  'description' => '500,000 mCoin'
                  ),
                  array(
                  'identify' => '100000000',
                  'message' => '100,000,000 VNĐ',
                  'description' => '1,000,000 mCoin'
                  )
                 */
                )
            ),
            'banking-credit' => array(
                'title' => 'Nạp ngân hàng ( Thẻ quốc tê )',
                'identify' => 'banking-credit',
                'items' => array(
                    array(
                        'identify' => '500000',
                        'message' => '500,000 VNĐ',
                        'description' => '5,000 mCoin',
                    )
                )
            ),
            'inapp' => array(
                'title' => 'Nạp inapp',
                'identify' => 'inapp',
                'items' => array(
                    array(
                        'identify' => '1',
                        'message' => '20,000 VNĐ',
                        'description' => '140 mCoin',
                    ),
                    array(
                        'identify' => '10',
                        'message' => '200,000 VNĐ',
                        'description' => '1,400 mCoin',
                    ),
                    array(
                        'identify' => '50',
                        'message' => '1,000,000 VNĐ',
                        'description' => '7,000 mCoin',
                    ),
                    array(
                        'identify' => '100',
                        'message' => '2,000,000 VNĐ',
                        'description' => '14,000 mCoin',
                    )
                )
            )
        );
        if (is_mecorp() === TRUE) {
            $banking_atm_10k = array(
                'identify' => '10000',
                'message' => '10,000 VNĐ',
                'description' => '100 mCoin'
            );
            array_unshift($result['banking-atm']['items'], $banking_atm_10k);
        }
        return $result;
    }

    public static function payment_list_v3($direct = TRUE, $language = 'vi', $target = 'mopay') {
        $response = array(
            'title' => '',
            'desc' => '',
            'icon' => '',
            'options' => array(
                'hotline' => '1900 6611',
                'rate' => 'Bảng tỉ giá',
                'rate_type' => 'inside'
            ),
            'action' => 'list',
            'identify' => $target . '_main',
            'data' => array(
                array(
                    'title' => 'Nạp qua SMS',
                    'desc' => '',
                    'icon' => 'http://s1-service.mobo.vn/assets/icon/v2/icon_sms.png',
                    'options' => '',
                    'action' => 'list',
                    'identify' => $target . '_1',
                    'data' => array(
                        array(
                            'title' => 'SMS 10000 VNĐ',
                            'right_title' => '10000',
                            'desc' => 'Nhận 20 Vàng',
                            'icon' => 'http://s1-service.mobo.vn/assets/icon/v2/icon_sms.png',
                            'options' => array(
                                "phone" => "10000@9029",
                            ),
                            'action' => 'pay_sms',
                            'data' => ""
                        ),
                        array(
                            'title' => 'SMS 15000 VNĐ',
                            'right_title' => '10000',
                            'desc' => 'Nhận 20 Vàng',
                            'icon' => 'http://s1-service.mobo.vn/assets/icon/v2/icon_sms.png',
                            'options' => array(
                                "phone" => "100000@9029",
                            ),
                            'action' => 'pay_sms',
                            'data' => ""
                        )
                    )
                ),
                array(
                    'title' => 'Nạp card',
                    'desc' => '',
                    'icon' => 'http://s1-service.mobo.vn/assets/icon/v2/icon_card.png',
                    'options' => '',
                    'action' => 'list',
                    'identify' => $target . '_2',
                    'data' => array(
                        array(
                            'title' => 'Nạp thẻ Mobifone',
                            'desc' => '',
                            'icon' => "http://service.mobo.vn/assets/icon/vms.png",
                            'options' => array(
                                "confirm" => "Bạn có muốn nạp không",
                                "keyboard_state" => "number",
                                "card" => "vms",
                                "input" => array(
                                    "pin" => "number",
                                    "serial" => "full"
                                )
                            ),
                            'action' => 'pay_card',
                            'data' => ""
                        ),
						array(
                            'title' => 'Nạp thẻ Vinaphone',
                            'desc' => '',
                            'icon' => "http://service.mobo.vn/assets/icon/vina.png",
                            'options' => array(
                                "confirm" => "Bạn có muốn nạp không",
                                "keyboard_state" => "number",
                                "card" => "vina",
                                "input" => array(
                                    "pin" => "number",
                                    "serial" => "full"
                                )
                            ),
                            'action' => 'pay_card',
                            'data' => ""
                        ),
						array(
                            'title' => 'Nạp thẻ Gate',
                            'desc' => '',
                            'icon' => "http://service.mobo.vn/assets/icon/gate.png",
                            'options' => array(
                                "confirm" => "Bạn có muốn nạp không",
                                "keyboard_state" => "number",
                                "card" => "gate",
                                "input" => array(
                                    "pin" => "full",
                                    "serial" => "full"
                                )
                            ),
                            'action' => 'pay_card',
                            'data' => ""
                        )
                    )
                ),
                array(
                    'title' => 'Nạp qua ngân hàng',
                    'desc' => '',
                    'icon' => 'http://s1-service.mobo.vn/assets/icon/v2/icon_bank.png',
                    'options' => '',
                    'action' => 'list',
                    'identify' => $target . '_3',
                    'data' => array(
                        array(
                            'title' => 'Ngân hàng ACB',
                            'desc' => '',
                            'icon' => 'http://api.sky.mobo.vn/assets/icon/ico_eximbank_3x.png',
                            'options' => array(
                                "prices" => array(
                                    array(
                                        "message" => "10000",
                                        "description" => "10,000 VNĐ"
                                    ),
                                    array(
                                        "message" => "100000",
                                        "description" => "100,000 VNĐ"
                                    ),
                                    array(
                                        "message" => "200000",
                                        "description" => "200,000 VNĐ"
                                    ),
                                    array(
                                        "message" => "500000",
                                        "description" => "500,000 VNĐ"
                                    ),
                                    array(
                                        "message" => "1000000",
                                        "description" => "1,000,000 VNĐ"
                                    ),
                                    array(
                                        "message" => "5000000",
                                        "description" => "5,000,000 VNĐ"
                                    )
                                ),
                                "type" => "1",
                                "code" => "acbbank",
                            ),
                            'action' => 'pay_ibanking',
                            'data' => ""
                        ),
                        array(
                            'title' => 'Ngân hàng Đông Á',
                            'desc' => '',
                            'icon' => 'http://api.sky.mobo.vn/assets/icon/ico_eximbank_3x.png',
                            'options' => array(
                                "prices" => array(
                                    array(
                                        "message" => "10000",
                                        "description" => "10,000 VNĐ"
                                    ),
                                    array(
                                        "message" => "100000",
                                        "description" => "100,000 VNĐ"
                                    ),
                                    array(
                                        "message" => "200000",
                                        "description" => "200,000 VNĐ"
                                    ),
                                    array(
                                        "message" => "500000",
                                        "description" => "500,000 VNĐ"
                                    ),
                                    array(
                                        "message" => "1000000",
                                        "description" => "1,000,000 VNĐ"
                                    ),
                                    array(
                                        "message" => "5000000",
                                        "description" => "5,000,000 VNĐ"
                                    )
                                ),
                                "type" => "1",
                                "code" => "acbbank",
                            ),
                            'action' => 'pay_ibanking',
                            'data' => ""
                        )
                    )
                ),
            )
        );
        if ($target == 'mopay') {
            $response['data'][] = array(
                'title' => 'Ví mopay',
                'desc' => '',
                'icon' => '',
                'options' => array(
                    'show_balance' => TRUE
                ),
                'action' => 'list',
                'identify' => $target . '_wallet_category',
                'data' => array(
                    array(
                        'title' => 'Nạp vào ví',
                        'desc' => '',
                        'icon' => '',
                        'options' => '',
                        'action' => $target . '_wallet',
                        'identify' => $target . '_mopay',
                        'data' => ''
                    ),
                    array(
                        'title' => 'Sử dụng ví',
                        'desc' => '',
                        'icon' => '',
                        'options' => '',
                        'action' => 'pay_wallet',
                        'identify' => $target . '_5',
                        'data' => ''
                    )
                )
            );
        }
        return $response;
    }

    public static function payment_list($direct = TRUE, $language = 'vi', $target = 'mobo') {
        if (API_VERSION == 3) {
            return self::payment_list_v3($direct, $language, $target);
        }
        $CI = & get_instance();
        $CI->load->MEAPI_Library('Language');
        $CI->Language->init($language);
        if (empty($direct) === FALSE) {
            $CI->load->MEAPI_Library('Mecorp/MecorpPayment', 'MecorpPayment');
            $cache = $CI->cache->load('memcache', 'mopay_info');
            $partner_config = $cache->store('MOPAY_PARTNER_APP_EXCHANGE_' . SCOPE_ID, $CI->MecorpPayment, 'get_app_exchange', array(SCOPE_ID));
            if (empty($partner_config) === FALSE) {
                $rate = $partner_config['rate'];
                $unit = $partner_config['unit'];
            } else {
                $rate = 0;
                $unit = 'Error';
            }
        } else {
            $rate = 1;
            $unit = 'mCoin';
        }
        $sms = array(
            'title' => $CI->Language->item('PAYMENT_SMS'),
            'data' => array(
                array(
                    'phone' => '50000@9029',
                    'message' => $CI->Language->item('PAYMENT_SMS_PAY', array('money' => '50.000')),
                    'confirm' => '',
                    'description' => $CI->Language->item('PAYMENT_SMS_RECEIVE', array('credit' => 250 * $rate, 'unit' => $unit)),
                    'money' => 50000
                ),
                array(
                    'phone' => '100000@9029',
                    'message' => $CI->Language->item('PAYMENT_SMS_PAY', array('money' => '100.000')),
                    'confirm' => '',
                    'description' => $CI->Language->item('PAYMENT_SMS_RECEIVE', array('credit' => 500 * $rate, 'unit' => $unit)),
                    'money' => 100000
                ),
            )
        );
        $response = array(
            'title' => '',
            'description' => $CI->Language->item('PAYMENT_DESC'),
            'sms' => $sms,
            'card' => array(
                'title' => $CI->Language->item('PAYMENT_CARD'),
                'data' => array(
                    array(
                        'type' => 'card',
                        'card' => 'gate', // VũLH yêu cầu
                        'message' => 'Gate',
                        'description' => 'Gate',
                        'confirm' => $CI->Language->item('PAYMENT_CARD_CONFIRM'),
                        'icon' => 'http://service.mobo.vn/assets/icon/gate.png',
                        'keyboard_state' => 'full',
                        'input' => array('serial', 'pin')
                    ),
                    array(
                        'type' => 'card',
                        'card' => 'vms',
                        'message' => 'Mobifone',
                        'description' => 'Mobifone',
                        'confirm' => $CI->Language->item('PAYMENT_CARD_CONFIRM'),
                        'icon' => 'http://service.mobo.vn/assets/icon/vms.png',
                        'keyboard_state' => 'number',
                        'input' => array('serial', 'pin')
                    ),
                    array(
                        'type' => 'card',
                        'card' => 'vina',
                        'message' => 'Vinaphone',
                        'description' => 'Vinaphone',
                        'confirm' => $CI->Language->item('PAYMENT_CARD_CONFIRM'),
                        'icon' => 'http://service.mobo.vn/assets/icon/vina.png',
                        'keyboard_state' => 'full',
                        'input' => array('serial', 'pin')
                    ),
                    array(
                        'type' => 'card',
                        'card' => 'viettel',
                        'message' => 'Viettel',
                        'description' => 'Viettel',
                        'confirm' => $CI->Language->item('PAYMENT_CARD_CONFIRM'),
                        'icon' => 'http://service.mobo.vn/assets/icon/viettel.png',
                        'keyboard_state' => 'number',
                        'input' => array('serial', 'pin')
                    )
                )
            ),
            'banking' => array(
                'title' => $CI->Language->item('PAYMENT_BANKING'),
                'data' => array(
                    /* array(
                      'icon' => 'http://service.mobo.vn/assets/icon/ico_abbank_3x.png',
                      'type' => '1',
                      'code' => 'abbank',
                      'message' => 'Ngân hàng An Bình',
                      'description' => '',
                      'interface' => 'ibanking'
                      ), */
                    array(
                        'icon' => 'http://service.mobo.vn/assets/icon/ico_acb_3x.png',
                        'type' => '1',
                        'code' => 'acbbank',
                        'message' => 'Ngân hàng ACB',
                        'description' => '',
                        'interface' => 'ibanking'
                    ),
                    array(
                        'icon' => 'http://service.mobo.vn/assets/icon/ico_agribank_3x.png',
                        'type' => '1',
                        'code' => 'agribank',
                        'message' => 'Ngân hàng Nông nghiệp và Phát triển Nông thôn',
                        'description' => '',
                        'interface' => 'ibanking'
                    ),
                    array(
                        'icon' => 'http://service.mobo.vn/assets/icon/ico_donga_3x.png',
                        'type' => '1',
                        'code' => 'dongabank',
                        'message' => 'Ngân hàng Đông Á',
                        'description' => '',
                        'interface' => 'ibanking'
                    ),
                    array(
                        'icon' => 'http://service.mobo.vn/assets/icon/ico_eximbank_3x.png',
                        'type' => '1',
                        'code' => 'eximbank',
                        'message' => 'Ngân hàng Xuất nhập khẩu',
                        'description' => '',
                        'interface' => 'ibanking'
                    ),
                    array(
                        'icon' => 'http://service.mobo.vn/assets/icon/ico_maritime_3x.png',
                        'type' => '1',
                        'code' => 'maritimebank',
                        'message' => 'Ngân hàng Hàng Hải Việt Nam',
                        'description' => '',
                        'interface' => 'ibanking'
                    ),
                    array(
                        'icon' => 'http://service.mobo.vn/assets/icon/ico_mbbank_3x.png',
                        'type' => '1',
                        'code' => 'mbbank',
                        'message' => 'Ngân hàng Quân đội',
                        'description' => '',
                        'interface' => 'ibanking'
                    ),
                    array(
                        'icon' => 'http://service.mobo.vn/assets/icon/ico_sacombank_3x.png',
                        'type' => '1',
                        'code' => 'sacombank',
                        'message' => 'Ngân hàng Sài gòn Thương Tín',
                        'description' => '',
                        'interface' => 'ibanking'
                    ),
                    array(
                        'icon' => 'http://service.mobo.vn/assets/icon/ico_tech_3x.png',
                        'type' => '1',
                        'code' => 'techcombank',
                        'message' => 'Ngân hàng Kỹ Thương',
                        'description' => '',
                        'interface' => 'ibanking'
                    ),
                    array(
                        'icon' => 'http://service.mobo.vn/assets/icon/ico_tienphong_3x.png',
                        'type' => '1',
                        'code' => 'tienphongbank',
                        'message' => 'Ngân hàng Tiên Phong',
                        'description' => '',
                        'interface' => 'ibanking'
                    ),
                    array(
                        'icon' => 'http://service.mobo.vn/assets/icon/ico_vietcombank_3x.png',
                        'type' => '1',
                        'code' => 'vietcombank',
                        'message' => 'Ngân hàng Ngoại Thương Việt Nam',
                        'description' => '',
                        'interface' => 'ibanking'
                    ),
                    array(
                        'icon' => 'http://service.mobo.vn/assets/icon/ico_vietinbank_3x.png',
                        'type' => '1',
                        'code' => 'vietinbank',
                        'message' => 'Ngân hàng Công Thương Việt Nam',
                        'description' => '',
                        'interface' => 'ibanking'
                    ),
                    array(
                        'icon' => 'http://service.mobo.vn/assets/icon/ico_vpbank_3x.png',
                        'type' => '1',
                        'code' => 'vpbank',
                        'message' => 'Ngân hàng Việt nam Thịnh Vượng',
                        'description' => '',
                        'interface' => 'ibanking'
                    )
                )
            ),
            /*
              'wallet' => array(
              'title' => $CI->Language->item('PAYMENT_WALLET'),
              ),
             */
            'hotline' => '19006611',
        );
        if ((APP_NAME != 'bog' && APP_NAME != 'mgh') OR is_mecorp() === TRUE) {
            $response['wallet'] = array(
                'title' => $CI->Language->item('PAYMENT_WALLET'),
            );
        }
        //if (geoip_country_code_by_name($_SERVER['REMOTE_ADDR']) != 'VN' || is_mecorp() === TRUE) {
        $banking_visa = array(
            'icon' => 'http://service.mobo.vn/assets/icon/v2/visa.png',
            'type' => '1',
            'code' => 'visa',
            'message' => 'Thẻ tín dụng (Visa, Master...)',
            'description' => '',
            'interface' => 'ibanking'
        );
        array_unshift($response['banking']['data'], $banking_visa);
        //}



        if (is_mecorp() === TRUE) {
            $sms_9029_10k = array(
                'phone' => '10000@9029',
                'message' => $CI->Language->item('PAYMENT_SMS_PAY', array('money' => '10.000')),
                'confirm' => '',
                'description' => $CI->Language->item('PAYMENT_SMS_RECEIVE', array('credit' => 50 * $rate, 'unit' => $unit)),
                'money' => 10000
            );
            $sms_9029_20k = array(
                'phone' => '20000@9029',
                'message' => $CI->Language->item('PAYMENT_SMS_PAY', array('money' => '20.000')),
                'confirm' => '',
                'description' => $CI->Language->item('PAYMENT_SMS_RECEIVE', array('credit' => 100 * $rate, 'unit' => $unit)),
                'money' => 20000
            );
            array_unshift($response['sms']['data'], $sms_9029_20k);
            array_unshift($response['sms']['data'], $sms_9029_10k);
        } else {
            if (SCOPE_ID == 128 || SCOPE_ID == 125 || SCOPE_ID == 108) {
                $sms_9029_20k = array(
                    'phone' => '20000@9029',
                    'message' => $CI->Language->item('PAYMENT_SMS_PAY', array('money' => '20.000')),
                    'confirm' => '',
                    'description' => $CI->Language->item('PAYMENT_SMS_RECEIVE', array('credit' => 100 * $rate, 'unit' => $unit)),
                    'money' => 20000
                );
                array_unshift($response['sms']['data'], $sms_9029_20k);
            }
        }

        return $response;
    }

    public function payment_type($mobo_id, $language = 'vi', $target = 'mobo') {
        $response = array(
            'title' => APP_TITLE,
            'desc' => $mobo_id,
            'icon' => '',
            'options' => array(
                'hotline' => '1900 6611',
                'rate' => 'Bảng tỉ giá',
                'rate_type' => 'inside'
            ),
            'action' => 'list',
            'identify' => $target . '_main',
            'data' => array(
                array(
                    'title' => 'Mopay (sms, card, bank...)',
                    'desc' => '',
                    'icon' => '',
                    'options' => '',
                    'action' => 'list',
                    'identify' => $target . '_1',
                )
            )
        );
        return $response;
    }

}
